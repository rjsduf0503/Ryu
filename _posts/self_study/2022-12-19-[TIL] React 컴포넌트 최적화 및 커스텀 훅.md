---
layout: post
author: ë¥˜ê±´ì—´
title: '[TIL] React ì»´í¬ë„ŒíŠ¸ ìµœì í™” ë° ì»¤ìŠ¤í…€ í›…'
categories: programmers
tags: [cnu, programmers, dev-course, javascript, til, today-i-learned, react]
---

![header](https://capsule-render.vercel.app/api?type=waving&color=auto&height=300&section=header&text=Today%20I%20Learned...&fontAlign=30&fontAlignY=30&fontSize=55)

# Reactì˜ ì»´í¬ë„ŒíŠ¸ ìµœì í™” ë°©ë²•ê³¼ ì»¤ìŠ¤í…€ í›…ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì

## ğŸ’¡Â ìƒˆë¡­ê²Œ ì•Œê²Œëœ ì 

Reactì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ìµœì í™” í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ëŒ€í‘œì ìœ¼ë¡œ useMemo, React.memo, useCallbackì´ ì¡´ì¬í•œë‹¤.

ì»´í¬ë„ŒíŠ¸ì˜ ë¦¬ë Œë”ë§ ì¡°ê±´ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

1. í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ëŠ” ìì‹ ì˜ ìƒíƒœê°€ ë³€ê²½ë  ë•Œ ë¦¬ë Œë”ë§ëœë‹¤.
2. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶€í„° ë°›ëŠ” propì´ ë³€ê²½ë  ë•Œ ë¦¬ë Œë”ë§ëœë‹¤.
3. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœê°€ ë³€ê²½ë˜ë©´ ë¦¬ë Œë”ë§ëœë‹¤.

**ë§Œì•½ ì—°ì‚°ì˜ ì†ë„ê°€ ëŠë¦° ì»´í¬ë„ŒíŠ¸ë¼ë©´â€¦.??** 

ìœ„ ì¡°ê±´ì— ë”°ë¼ ë¦¬ë Œë”ë§ ë  ë•Œ, ë™ì¼í•œ ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•´ ë¶ˆí•„ìš”í•œ ì‹œê°„ì´ ë§ì´ ì†Œìš”ë˜ì–´ ì‚¬ìš©ìë“¤ì—ê²Œ ë¶ˆí¸í•¨ì„ ê°€ì ¸ì˜¬ ê²ƒì´ë‹¤.

**useMemo**

ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ useMemoë¥¼ ì‚¬ìš©í•´ íŠ¹ì • ì¡°ê±´ì´ ë³€ê²½ë  ë•Œë§Œ ë¦¬ë Œë”ë§ë˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤. 

useMemoëŠ” íŠ¹ì • ê²°ê³¼ê°’ì„ ì¬ì‚¬ìš©í•  ë•Œ ì‚¬ìš©í•œë‹¤. ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì.

```jsx
// ShowSum

import { useMemo } from 'react';

function sum(n) {
  console.log('start');
  let res = 0;

  for (let i = 0; i <= n; i += 1) {
    res += i;
  }

  console.log('finished');
  return res;
}

const ShowSum = ({ label, n }) => {
  // const result = sum(n);
  const result = useMemo(() => sum(n), [n]);
  return (
    <span>
      {label}: {result}
    </span>
  );
};

export default ShowSum;
```

**React.memo**

memoëŠ” ì»´í¬ë„ŒíŠ¸ì˜ propsê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ì„ ê²½ìš°, ë¦¬ë Œë”ë§ì„ ë°©ì§€í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ì˜ ë¦¬ë Œë”ë§ ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì´ë‹¤.

ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ì„ ê²½ìš°ì—ëŠ” ë¦¬ë Œë”ë§ë˜ì§€ ì•Šë„ë¡ í•œë‹¤. ì¦‰, ë¦¬ë Œë”ë§ì´ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•´ì„œë§Œ ë¦¬ë Œë”ë§ì„ í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì.

```jsx
// Box

import styled from '@emotion/styled';
import { memo } from 'react';

const BoxWrapper = styled.div`
  width: 100px;
  height: 100px;
  background-color: cyan;
`;

const Box = memo(() => {
  console.log('Box rendered');
  return <BoxWrapper />;
});

export default Box;
```

í˜„ì¬ëŠ” ë‹¨ìˆœí•œ ì˜ˆì‹œë¡œ propsê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•´ React.memoë¥¼ ì‚¬ìš©í•´ ì²˜ìŒ ë Œë”ë§ ì´í›„ ë¦¬ë Œë”ë§ì´ ì´ë¤„ì§€ì§€ ì•Šì§€ë§Œ, propsê°€ ì¡´ì¬í•  ê²½ìš°ì—ë„ ì´ì „ê³¼ ë™ì¼í•œ propsê°€ ì „ë‹¬ëœ ê²½ìš°ì—ëŠ” ë¦¬ë Œë”ë§ì„ ë°©ì§€í•˜ì—¬ ìµœì í™”í•  ìˆ˜ ìˆë‹¤.

**useCallback**

useMemoì™€ ë‹¬ë¦¬, useCallbackì€ íŠ¹ì • í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ë§Œë“¤ì§€ ì•Šê³  ì¬ì‚¬ìš©í•˜ê³  ì‹¶ì„ ê²½ìš° ì‚¬ìš©í•œë‹¤. ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì.

```jsx
// Checkbox

import { memo } from 'react';

const Checkbox = memo(({ label, checked, onChange }) => {
  console.log(label, checked);
  return (
    <label>
      {label}
      <input type="checkbox" defaultChecked={checked} onChange={onChange} />
    </label>
  );
});

export default Checkbox;
```

```jsx
// App

import { useCallback, useState } from 'react';
import Checkbox from './components/Checkbox';

function App() {
  const [foodChecked, setFoodChecked] = useState(false);
  const [clothesChecked, setClothesChecked] = useState(false);
  const [shelterChecked, setShelterChecked] = useState(false);

  const foodChange = (e) => setFoodChecked(e.target.checked);
  const clothesChange = (e) => setClothesChecked(e.target.checked);
  const shelterChange = (e) => setShelterChecked(e.target.checked);

  return (
    <div>
      <Checkbox label="Food" checked={foodOn} onChange={foodChange} />
      <Checkbox label="Clothes" checked={clothesOn} onChange={clothesChange} />
      <Checkbox label="Shelter" checked={shelterOn} onChange={shelterChange} />
    </div>
  );
}

export default App;
```

ìœ„ì™€ ê°™ì€ ì½”ë“œë¥¼ ì •ì˜í–ˆì„ ë•Œ, ì²´í¬ ë°•ìŠ¤ë¥¼ í´ë¦­ ì‹œ í´ë¦­í•œ ì²´í¬ ë°•ìŠ¤ ì™¸ì—ë„ ë‚˜ë¨¸ì§€ ë‘ ì²´í¬ë°•ìŠ¤ê¹Œì§€ ë¦¬ë Œë”ë§ë˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤. ì´ëŠ” foodChange, clothesChange, shelterChange í•¨ìˆ˜ë“¤ì´ ì¬ì •ì˜ ë˜ë©´ì„œ ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ì— í• ë‹¹ëœ í•¨ìˆ˜ê°€ onChangeë¡œ ë„˜ì–´ê°€ê²Œ ë˜ì–´ ë¦¬ë Œë”ë§ ë˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ useCallbackì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```jsx
// App

const foodChange = useCallback((e) => setFoodOn(e.target.checked), []);
const clothesChange = useCallback((e) => setClothesOn(e.target.checked), []);
const shelterChange = useCallback((e) => setShelterOn(e.target.checked), []);
```

useCallbackìœ¼ë¡œ ê°ì‹¸ì£¼ê³ , í˜„ì¬ í• ë‹¹í•  ë””íœë˜ì‹œê°€ ë”°ë¡œ ì—†ê¸° ë•Œë¬¸ì— ë¹ˆ ë°°ì—´ë¡œ í• ë‹¹í•˜ë©´ ë‹¤ì‹œ ë Œë”ë§ ë˜ëŠ” í˜„ìƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.

**Custom Hook**

ì•ì„œ ì •ì˜í•œ Checkboxì˜ state, setStateì™€ ê°™ì€ ë¶€ë¶„ë“¤ì´ ì—¬ëŸ¬ ê³³ì—ì„œ ì‚¬ìš©ëœë‹¤ë©´ ë§¤ë²ˆ ì´ëŸ° ë¡œì§ë“¤ì„ ë°˜ë³µí•´ì„œ ì‘ì„±í•˜ëŠ” ê²ƒì€ ì¬ì‚¬ìš©ì„±ì´ ë§¤ìš° ë–¨ì–´ì§€ëŠ” ì¼ì´ë‹¤. ë”°ë¼ì„œ Custom Hookì„ ì‚¬ìš©í•¨ìœ¼ë¡œ ì¤‘ë³µë˜ëŠ” ë¡œì§ì„ ìµœì†Œí™” í•  ìˆ˜ ìˆë‹¤.

```jsx
// useToggle

import { useCallback, useState } from 'react';

const useToggle = (initialState = false) => {
  const [state, setState] = useState(initialState);
  const toggle = useCallback(() => setState((state) => !state), []);

  return [state, toggle];
};

export default useToggle;
```

```jsx
// App

import Checkbox from './components/Checkbox';
import useToggle from './hooks/useToggle';

const App = () => {
  const [foodChecked, foodToggle] = useToggle();
  const [clothesChecked, clothesToggle] = useToggle();
  const [shelterChecked, shelterToggle] = useToggle();

  return (
    <div>
      <Checkbox label='Food' checked={foodChecked} onChange={foodToggle} />
			<Checkbox label='Clothes' checked={clothesChecked} onChange={clothesToggle} />
			<Checkbox label='Shelter' checked={shelterChecked} onChange={shelterToggle} />
    </div>
  );
};

export default App;
```

ì´ë¥¼ í†µí•´ ì½”ë“œë¥¼ ì ˆë°˜ ê°€ëŸ‰ ì¤„ì¼ ìˆ˜ ìˆê³ , ë” ê°€ë…ì„± ìˆëŠ” ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

ì´ ì™¸ì—ë„ ì—¬ëŸ¬ê°€ì§€ Custom Hookì„ ì‘ì„±í•  ìˆ˜ ìˆëŠ”ë°, íŠ¹ì • elementë¥¼ hoverí•  ë•Œ ë™ì‘í•˜ëŠ” Custom Hookì„ ë§Œë“¤ì–´ë³´ì.

```jsx
// useHover

import { useCallback, useEffect, useRef, useState } from 'react';

const useHover = () => {
  const [state, setState] = useState(false);
  const ref = useRef(null);

  const handleMouseOver = useCallback(() => setState(true), []);
  const handleMouseOut = useCallback(() => setState(false), []);

  useEffect(() => {
    const ele = ref.current;
    if (ele) {
      ele.addEventListener('mouseover', handleMouseOver);
      ele.addEventListener('mouseout', handleMouseOut);

      return () => {
        ele.removeEventListener('mouseover');
        ele.removeEventListener('mouseout');
      };
    }
  }, [ref, handleMouseOver, handleMouseOut]);

  return [ref, state];
};

export default useHover;
```

```jsx
// App

import Box from './components/Box';
import useHover from './hooks/useHover';

const App = () => {
  const [ref, isHover] = useHover();

  return (
    <div>
      {isHover ? 'mouseover' : 'mouseout'}
      <Box ref={ref} />
    </div>
  );
};

export default App;
```

useHoverë¼ëŠ” Custom Hookì„ ì •ì˜í•´ì„œ ì‚¬ìš©í•œë‹¤ë©´ hover ì´ë²¤íŠ¸ê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ ì´ë²¤íŠ¸ë¥¼ ë§¤ë²ˆ ì •ì˜í•  í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤. ë‹¨ìˆœíˆ hover ì´ë²¤íŠ¸ë¥¼ ì ìš©í•˜ê³ ì í•˜ëŠ” elementì— refë¥¼ ê±¸ì–´ì£¼ê³ , hoverì˜ ì—¬ë¶€ì— ë”°ë¼ ë¡œì§ì„ ì‘ì„±í•˜ë©´ ëœë‹¤.

ìœ„ì™€ ê°™ì€ ë§¥ë½ìœ¼ë¡œ Custom Hookì„ ì‚¬ìš©í•œë‹¤ë©´, ì¤‘ë³µ ë¡œì§ì˜ ì‚¬ìš©ì„ ìµœì†Œí™”í•˜ì—¬ ì½”ë“œì˜ ì–‘ì´ ì ì–´ì§ˆ ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ë™ì¼í•œ ì»¤ìŠ¤í…€ í›…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê¸°ì— ë™ì¼í•œ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë§ì„ ê²½ìš° ë”ìš± ë¹›ì„ ë°œí•  ìˆ˜ ìˆê²Œ ëœë‹¤.

---

## â—ï¸Â ëŠë‚€ì 

> Reactì˜ ì»´í¬ë„ŒíŠ¸ ìµœì í™” ë°©ë²• ë° ì»¤ìŠ¤í…€ í›…ì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë³´ì•˜ë‹¤.
>
> ì—¬íƒœê¹Œì§€ ì»´í¬ë„ŒíŠ¸ ìµœì í™” ë°©ë²•ì€ ì•Œê³  ìˆì—ˆì§€ë§Œ ì˜ ì‚¬ìš©í•˜ì§„ ì•Šì•˜ê³ , ì»¤ìŠ¤í…€ í›…ë„ ë§ˆì°¬ê°€ì§€ì˜€ë‹¤.
>
> ì˜¤ëŠ˜ ë‚´ìš©ì„ ì •ë¦¬í•˜ë©´ì„œ ë³´ë‹ˆ ì—¬íƒœê¹Œì§€ ì™œ ì ìš©í•˜ì§€ ì•Šì•˜ì„ê¹Œ í•˜ëŠ” í›„íšŒê°€ ë‚¨ì•˜ê³ , ì•ìœ¼ë¡œëŠ” ìƒê°ë§Œ í•˜ì§€ ì•Šê³  ì½”ë“œì˜ ìœ ì§€ë³´ìˆ˜ì„±ì„ ìœ„í•´ ë” ë‚˜ì•„ê°€ ì„œë¹„ìŠ¤ ìµœì í™”ë¥¼ ìœ„í•´ ì˜¤ëŠ˜ ë°°ìš´ ê²ƒë“¤ì„ ì˜ í™œìš©í•´ì•¼ê² ë‹¤.
